<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>

<DialogPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="it.unina.foodlab.controller.SessioniPreviewController"
            fx:id="dialogPane"
            prefWidth="760" prefHeight="560"
            stylesheets="@/it/unina/foodlab/util/dark-theme.css"
            styleClass="sessioni-preview"
            style="-fx-background-color: linear-gradient(to bottom,#242c2f,#20282b);
                   -fx-border-color: rgba(255,255,255,0.06);
                   -fx-background-radius:12; -fx-border-radius:12;
                   -fx-font-family:'Segoe UI', Inter, system-ui; -fx-font-size:13px;">

    <header>
        <HBox spacing="12" alignment="CENTER_LEFT"
              style="-fx-background-color: linear-gradient(to bottom,#1b2427,#152022);
                     -fx-background-radius:12 12 0 0; -fx-padding:12;">
            <children>
                <ImageView fitHeight="20" fitWidth="20" pickOnBounds="true" preserveRatio="true">
                    <image>
                        <Image url="@/icons/Report-Logo.png"/>
                    </image>
                </ImageView>
                <Label fx:id="lblHeader"
                       style="-fx-text-fill:#e9f5ec; -fx-font-weight:800; -fx-font-size:16px;"/>
            </children>
        </HBox>
    </header>

    <content>
        <!-- ROOT UNICO DEL CONTENT -->
        <VBox spacing="14" fillWidth="true">
            <padding>
                <Insets top="12" right="12" bottom="12" left="12"/>
            </padding>

            <!-- FILTRI E SEARCH -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <children>
                    <ToggleButton fx:id="tgAll"
                                  text="Tutte"
                                  selected="true"
                                  onAction="#onFiltroAll"
                                  style="-fx-background-color:#2b3438; -fx-background-radius:10;
                                         -fx-text-fill:#e9f5ec; -fx-padding:6 12;"/>

                    <ToggleButton fx:id="tgOnline"
                                  text="Online"
                                  onAction="#onFiltroOnline"
                                  style="-fx-background-color:#2b3438; -fx-background-radius:10;
                                         -fx-text-fill:#e9f5ec; -fx-padding:6 12;"/>

                    <ToggleButton fx:id="tgPresenza"
                                  text="In presenza"
                                  onAction="#onFiltroPresenza"
                                  style="-fx-background-color:#2b3438; -fx-background-radius:10;
                                         -fx-text-fill:#e9f5ec; -fx-padding:6 12;"/>

                    <Region HBox.hgrow="ALWAYS"/>

                    <TextField fx:id="txtSearch"
                               promptText="Cerca"
                               style="-fx-background-color:#2b3438; -fx-text-fill:#e9f5ec;
                                      -fx-prompt-text-fill: rgba(233,245,236,0.70);
                                      -fx-background-radius:10;
                                      -fx-border-color: rgba(255,255,255,0.06);
                                      -fx-border-radius:10;
                                      -fx-padding:8 12;"/>
                </children>
            </HBox>

            <!-- LISTA SESSIONI -->
            <ListView fx:id="lv"
                      prefHeight="220"
                      styleClass="list-view"
                      style="-fx-background-color:#20282b; -fx-control-inner-background:#20282b;
                             -fx-text-background-color:#e9f5ec; -fx-background-insets:0;
                             -fx-selection-bar: transparent; -fx-selection-bar-non-focused: transparent;">
                <VBox.vgrow>
                    <Priority fx:constant="ALWAYS"/>
                </VBox.vgrow>
            </ListView>

            <!-- TABELLA RICETTE -->
            <TableView fx:id="tvRicette"
                       prefHeight="220"
                       fixedCellSize="40"
                       tableMenuButtonVisible="false"
                       styleClass="table-view">
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY_FLEX_LAST_COLUMN"/>
                </columnResizePolicy>

                <columns>
                    <TableColumn fx:id="colNome"
                                 text="Nome">
                        <cellValueFactory>
                            <PropertyValueFactory property="nome"/>
                        </cellValueFactory>
                    </TableColumn>

                    <TableColumn fx:id="colDiff"
                                 text="DifficoltÃ "
                                 prefWidth="140">
                        <cellValueFactory>
                            <PropertyValueFactory property="difficolta"/>
                        </cellValueFactory>
                    </TableColumn>

                    <TableColumn fx:id="colTempo"
                                 text="Minuti"
                                 prefWidth="110"
                                 style="-fx-alignment: CENTER;">
                        <cellValueFactory>
                            <PropertyValueFactory property="tempoPreparazione"/>
                        </cellValueFactory>
                    </TableColumn>

                    <TableColumn fx:id="colDesc"
                                 text="Descrizione">
                        <cellValueFactory>
                            <PropertyValueFactory property="descrizione"/>
                        </cellValueFactory>
                    </TableColumn>
                </columns>
            </TableView>
        </VBox>
    </content>

    <buttonTypes>
        <ButtonType text="Chiudi" buttonData="CANCEL_CLOSE"/>
    </buttonTypes>

</DialogPane>
